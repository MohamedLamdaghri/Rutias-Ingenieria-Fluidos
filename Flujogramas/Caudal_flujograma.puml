
@startuml Caudal_Mohamed_activity
skinparam backgroundColor white
skinparam activity {
  BackgroundColor<<io>> #E8F5E9
  BackgroundColor<<calc>> #E7F3FF
  BackgroundColor<<decision>> #FFF3E0
  BorderColor #444
}

start
:'GUI': Leer entradas\nD, L, k, ν (v), Hf, Er(%) ; <<io>>
:tol = Er/100; <<calc>>

partition "solveQ(D, L, k, v, Hf, tol)" {
  :Q = initialGuessQ(D, L, k, v, Hf); <<calc>>
  :Re_est = reynolds(Q, D, v); <<calc>>
  :f = swameeJainF(Re_est, k, D); <<calc>>
  repeat
    :V = Q / area(D); <<calc>>
    :Re = reynolds(Q, D, v); <<calc>>
    :f = colebrook(Re, k, D, f); <<calc>>
    :Q_new = getQfromHf(f, D, L, Hf); <<calc>>
    :err = |Q_new - Q| / Q_new; <<calc>>
    :Q = Q_new; <<calc>>
  repeat while (err > tol?) is (Sí)
  :V = Q / area(D); <<calc>>
  :Re = reynolds(Q, D, v); <<calc>>
  if (Re < 2300?) then (Sí)
    :regimen = "Laminar"; <<calc>>
  else (No)
    :regimen = "Turbulent"; <<calc>>
  endif
}

:'GUI': Mostrar salida\nQ, f, Re, regimen; <<io>>
stop
@enduml
